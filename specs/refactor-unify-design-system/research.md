# Research: スペーシングの統一化

**Date**: 2026-01-10

## 1. 現在のスペーシング使用状況

### 1.1 詳細なスペーシング分析

#### ファイル別スペーシング使用一覧

| ファイル | スペーシング値 | コンテキスト |
|----------|---------------|--------------|
| `src/app/page.tsx` | `px-4` | メインコンテナの左右パディング |
| | `gap-4` | グリッドレイアウトのギャップ |
| | `pb-2` | 見出し下部パディング |
| | `p-6` | 記事カード、サイドバーセクションのパディング |
| | `gap-1` | アイコンとテキストのギャップ |
| | `px-4 py-2` | ボタン・リンクのパディング |
| | `gap-2` | フレックスコンテナのギャップ |
| | `px-4 py-6` | ツイートカード（モバイル） |
| | `sm:px-6 sm:py-8` | ツイートカード（デスクトップ） |
| | `p-4` | つぶやきリンク |
| | `ml-1` | 時間表示の左マージン |
| `src/app/layout.tsx` | `mb-20` | コンテナ下部マージン |
| | `h-20` | ヘッダーの高さ |
| | `sm:[&>header]:mb-12` | ヘッダー下のマージン（デスクトップ） |
| `src/app/header.tsx` | `p-4` | ヘッダー内部パディング |
| `src/app/about/page.tsx` | `px-4` | コンテナの左右パディング |
| | `mb-10` | 見出し下部マージン |
| | `pb-2` | 見出し下部パディング |
| `src/app/tweets/page.tsx` | なし（max-w-7xlのみ） | - |
| `src/app/console/page.tsx` | `px-4` | コンテナの左右パディング |
| `src/app/console/FileUploadInput.tsx` | `px-4 py-2` | ボタンパディング |
| `src/app/articles/[slug]/page.tsx` | `p-2` | モバイルパディング |
| | `sm:p-6` | デスクトップパディング |
| | `mb-10` | ヘッダー下マージン |
| | `pb-2` | 見出し下部パディング |
| | `gap-1` | アイコンとテキストのギャップ |
| | `gap-y-2` | フレックスアイテムの縦ギャップ |
| `src/components/ArticleList/ArticleList.tsx` | `gap-6` | 記事リストのギャップ |
| `src/components/LikeButton/LikeButton.tsx` | `p-2` | ボタンパディング |
| `src/components/MarkdownContent/MarkdownContent.tsx` | `pb-2` | 見出し下部パディング |
| | `px-1 py-0.5` | インラインコードのパディング |
| `src/tweets/TweetCard.tsx` | `gap-2` | グリッドギャップ |
| | `px-4 py-6` | カードパディング（モバイル） |
| | `sm:px-6 sm:py-8` | カードパディング（デスクトップ） |
| | `gap-1`, `gap-2` | フレックスギャップ |
| | `ml-1` | 時間表示の左マージン |
| `src/app/globals.scss` | `0.2rem` | heading-linkの左マージン |
| `src/app/syntax-highlight.scss` | `p-0` | コードブロックのリセット |

### 1.2 スペーシング値のグループ化

**基本スケール（4px刻み）との対応**:
| Tailwind | ピクセル値 | 使用コンテキスト |
|----------|-----------|-----------------|
| 0.5 | 2px | インラインコード縦パディング |
| 1 | 4px | インラインコード横パディング、小マージン |
| 2 | 8px | ボタン小パディング、モバイルパディング |
| 4 | 16px | 標準パディング、ヘッダー、ボタン横 |
| 6 | 24px | カードパディング、大きめギャップ、デスクトップパディング |
| 8 | 32px | ツイートカード縦パディング（デスクトップ） |
| 10 | 40px | セクション下マージン |
| 12 | 48px | ヘッダー下マージン（デスクトップ） |
| 20 | 80px | ページ下マージン、ヘッダー高さ |

## 2. ベストプラクティス調査

### 2.1 Tailwind CSSのスペーシングトークン設計

**Decision**: Tailwindのデフォルトスケール（4pxベース）をそのまま活用し、セマンティックなエイリアスのみを追加する

**Rationale**:
- Tailwindのデフォルトスケールは業界標準であり、チームメンバーや将来の開発者が理解しやすい
- 既存の値は全てTailwindのデフォルトスケールに準拠している
- カスタム値（`[17px]`等）は使用されていない

**Alternatives considered**:
1. 完全にセマンティックなトークンシステムを構築する → 過剰な抽象化になり、Principle 1（シンプルさ優先）に違反
2. CSS変数を使用する → Tailwindとの統合が複雑になる

### 2.2 セマンティックトークンの命名規則

**Decision**: `{コンテキスト}-{用途}` の形式で命名する

**Rationale**:
- 用途が明確で、どこで使うべきかが分かりやすい
- Principle 7（コード可読性）に準拠

**Naming examples**:
```
card-padding      → カードコンポーネントのパディング
section-gap       → セクション間のギャップ
heading-bottom    → 見出し下のスペース
button-padding-x  → ボタンの横パディング
button-padding-y  → ボタンの縦パディング
```

### 2.3 レスポンシブスペーシングのアプローチ

**Decision**: Tailwindのレスポンシブプレフィックス（`sm:`, `md:`, `lg:`）を使用し、トークン自体はレスポンシブに依存しない

**Rationale**:
- 既存のパターン（`sm:p-6` vs `p-2`）がこの方法を採用している
- トークンを単純に保ち、レスポンシブ適用はユーティリティクラスに委ねる

**Alternatives considered**:
1. レスポンシブバリアント付きトークン（`card-padding-mobile`, `card-padding-desktop`） → 複雑性が増し、柔軟性が低下
2. CSS変数 + メディアクエリ → Tailwindのエコシステムから外れる

## 3. トークン設計の決定事項

### 3.1 定義するセマンティックトークン

以下のセマンティックトークンを`tailwind.config.ts`の`theme.extend.spacing`に追加する：

| トークン名 | 値 | 用途 |
|-----------|-----|------|
| `page-x` | `1rem` (= 4) | ページコンテナの左右パディング |
| `card` | `1.5rem` (= 6) | カード内パディング |
| `card-sm` | `0.5rem` (= 2) | カード内パディング（モバイル） |
| `section-gap` | `1rem` (= 4) | セクション間のギャップ |
| `heading-bottom` | `0.5rem` (= 2) | 見出し下のパディング |
| `section-bottom` | `2.5rem` (= 10) | セクション下のマージン |
| `page-bottom` | `5rem` (= 20) | ページ下のマージン |
| `btn-x` | `1rem` (= 4) | ボタン横パディング |
| `btn-y` | `0.5rem` (= 2) | ボタン縦パディング |
| `icon-gap` | `0.25rem` (= 1) | アイコンとテキストのギャップ |
| `inline-x` | `0.25rem` (= 1) | インライン要素横パディング |
| `inline-y` | `0.125rem` (= 0.5) | インライン要素縦パディング |

### 3.2 トークン化しないスペーシング

以下の値はTailwindのデフォルトスケールをそのまま使用する：

- `gap-1`, `gap-2`, `gap-4`, `gap-6` → 汎用的なギャップで、セマンティックな意味を持たせる必要がない
- `ml-1` → 微調整用で、トークン化すると過剰

### 3.3 proseスペーシング

**Decision**: `@tailwindcss/typography`のデフォルト設定を維持する

**Rationale**:
- 現在のproseスタイル（`prose-lg`）は読みやすさが確保されている
- カスタマイズは`prose-h2:pb-2`等のユーティリティで十分
- typographyプラグインのデフォルトは十分に検討されたものである

## 4. 実装アプローチ

### 4.1 段階的な適用

1. **Phase 1**: `tailwind.config.ts`にセマンティックトークンを追加
2. **Phase 2**: 各コンポーネントを個別にリファクタリング（視覚的差異なしを確認しながら）
3. **Phase 3**: 全体の一貫性を確認し、必要に応じてトークンを調整

### 4.2 リスク軽減

- 各コンポーネント変更後にブラウザで視覚確認
- git diff で変更箇所を明確に追跡
- 問題が見つかった場合は即座にrevert可能な小さなコミット単位
